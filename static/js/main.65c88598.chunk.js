(this.webpackJsonptodoist=this.webpackJsonptodoist||[]).push([[0],{17:function(e,t,a){e.exports=a(28)},27:function(e,t,a){},28:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(14),o=a(1),l=a(16),s=a(3),d=a.n(s),i=a(15),u=a.n(i),m=(a(23),u.a.initializeApp({apiKey:"AIzaSyAQBcWdS7CBg9Ak6WMKlGjN_wPgWhzNqO4",authDomain:"etask-b8fec.firebaseapp.com",databaseURL:"https://etask-b8fec.firebaseio.com",projectId:"etask-b8fec",storageBucket:"etask-b8fec.appspot.com",messagingSenderId:"34316862310",appId:"1:34316862310:web:d83cd82b244ca768c27ea7"})),j=a(8),p=[{key:"INBOX",name:"Inbox"},{key:"TODAY",name:"Today"},{key:"NEXT_7",name:"Next 7 days"}],b=function(e){return p.find((function(t){return t.key===e}))},f=function(){var e="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",t=[];return function(){for(var a=(new Date).getTime(),n=new Array(8),c=7;c>=0;c--)n[c]=e.charAt(a%64),a=Math.floor(a/64);var r=n.join("");for(c=0;c<12;c++)r+=e.charAt(t[c]);return r}}(),k=Object(n.createContext)(),E=function(e){var t=e.children,a=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){m.firestore().collection("project").where("userId","==","1").orderBy("projectId").get().then((function(e){var t=e.docs.map((function(e){return Object(j.a)({docId:e.id},e.data())}));JSON.stringify(t)!==JSON.stringify(a)&&c(t)}))}),[a]),{projects:a,setProjects:c}}(),r=a.projects,l=a.setProjects;return c.a.createElement(k.Provider,{value:{projects:r,setProjects:l}},t)},v=function(){return Object(n.useContext)(k)},h=Object(n.createContext)(),_=function(e){var t=e.children,a=Object(n.useState)("1"),r=Object(o.a)(a,2),l=r[0],s=r[1];return c.a.createElement(h.Provider,{value:{selectedProject:l,setSelectProject:s}},t)},N=function(){return Object(n.useContext)(h)},y=function(e){var t=e.setProject,a=e.showProjectOverlay,n=e.setShowProjectOverlay,r=v().projects;return r&&a&&c.a.createElement("div",{className:"project-overlay","data-testid":"project-overlay"},c.a.createElement("ul",{className:"project-overlay__list"},r.map((function(e){return c.a.createElement("li",{key:e.projectId,"data-testid":"project-overlay-action",onClick:function(){t(e.projectId),n(!1)}},e.name)}))))},O=a(2),w=function(e){var t=e.setTaskDate,a=e.showTaskDate,n=e.setShowTaskDate;return a&&c.a.createElement("div",{className:"task-date","data-testid":"task-date-overlay"},c.a.createElement("ul",{className:"task-date__list"},c.a.createElement("li",{"data-testid":"task-date-today",onClick:function(){n(!1),t(d()().format("DD/MM/YYYY"))}},c.a.createElement("span",null,c.a.createElement(O.h,null)),c.a.createElement("span",null,"Today")),c.a.createElement("li",{"data-testid":"task-date-tomorrow",onClick:function(){n(!1),t(d()().add(1,"day").format("DD/MM/YYYY"))}},c.a.createElement("span",null,c.a.createElement(O.i,null)),c.a.createElement("span",null,"Tomorrow")),c.a.createElement("li",{"data-testid":"task-date-next-week",onClick:function(){n(!1),t(d()().add(7,"days").format("DD/MM/YYYY"))}},c.a.createElement("span",null,c.a.createElement(O.g,null)),c.a.createElement("span",null,"Next Week"))))},D=function(e){var t=e.showAddTaskMain,a=void 0===t||t,r=e.shouldShowMain,s=void 0!==r&&r,i=e.showQuickAddTask,u=e.setShowQuickAddTask,j=Object(n.useState)(""),p=Object(o.a)(j,2),b=p[0],f=p[1],k=Object(n.useState)(""),E=Object(o.a)(k,2),v=E[0],h=E[1],_=Object(n.useState)(""),D=Object(o.a)(_,2),x=D[0],I=D[1],S=Object(n.useState)(s),T=Object(o.a)(S,2),Y=T[0],C=T[1],g=Object(n.useState)(!1),A=Object(o.a)(g,2),P=A[0],M=A[1],K=Object(n.useState)(!1),X=Object(o.a)(K,2),B=X[0],Q=X[1],W=N().selectedProject,q=function(){var e=x||W,t="";return"TODAY"===e?t=d()().format("DD/MM/YYYY"):"NEXT_7"===e&&(t=d()().add(7,"days").format("DD/MM/YYYY")),b&&e&&m.firestore().collection("tasks").add({archived:!1,date:t||v,projectId:e,task:b,userId:"1"}).then((function(){f(""),C(!1),I(Object(l.a)(x)),M(!1)}))};return c.a.createElement("div",{className:i?"add-task add-task__overlay":"add-task","data-testid":"add-task-comp"},a&&c.a.createElement("div",{className:"add-task__shallow","data-testid":"show-main-action",onClick:function(){return C(!Y)},onKeyDown:function(){return C(!Y)},role:"button",tabIndex:0},c.a.createElement("span",{className:"add-task__plus"},"+"),c.a.createElement("span",{className:"add-task__text"},"Add Task ")),(Y||i)&&c.a.createElement("div",{className:"add-task__main","data-testid":"add-task-main"},i&&c.a.createElement("div",{"data-testid":"quick-add-task"},c.a.createElement("h2",{className:"header"},"Quick Add Task"),c.a.createElement("span",{className:"add-task__cancel-x","data-testid":"add-task-quick-cancel",onClick:function(){C(!1),M(!1),u(!1)},onKeyDown:function(){C(!1),M(!1),u(!1)},tabIndex:0,role:"button"},"X")),c.a.createElement(w,{setTaskDate:h,showTaskDate:B,setShowTaskDate:Q}),c.a.createElement(y,{setProject:I,setShowProjectOverlay:M,showProjectOverlay:P}),c.a.createElement("input",{type:"text",value:b,className:"add-task__content","data-testid":"add-task-content",onChange:function(e){return f(e.target.value)}}),c.a.createElement("button",{type:"button",className:"add-task__submit","data-testid":"add-task",onClick:function(){i?q()&&u(!1):q()}},"Add task"),!i&&c.a.createElement("span",{className:"add-task__cancel","data-testid":"add-task-main-cancel",onClick:function(){C(!1),M(!1)},onKeyDown:function(){C(!1),M(!1)},tabIndex:0,role:"button"},"Cancel"),c.a.createElement("span",{onClick:function(){return M(!P)},onKeyDown:function(){return M(!P)},tabIndex:0,role:"button","data-testid":"show-project-overlay",className:"add-task__project"},c.a.createElement(O.f,null)),c.a.createElement("span",{onClick:function(){return Q(!B)},onKeyDown:function(){return Q(!B)},tabIndex:0,role:"button","data-testid":"show-task-date-overlay",className:"add-task__date"},c.a.createElement(O.e,null))))},x=function(e){var t=e.darkmode,a=e.setDarkMode,r=Object(n.useState)(!1),l=Object(o.a)(r,2),s=l[0],d=l[1],i=Object(n.useState)(!1),u=Object(o.a)(i,2),m=u[0],j=u[1];return c.a.createElement("header",{className:"header","data-testid":"header"},c.a.createElement("nav",null,c.a.createElement("div",{className:"logo"},c.a.createElement("img",{src:"images/logo.png",alt:"Todoist"})),c.a.createElement("div",{className:"settings"},c.a.createElement("ul",null,c.a.createElement("li",{className:"settings__add"},c.a.createElement("button",{"data-testid":"quick-add-task-action","arial-label":"Quick Add Task",type:"button",onClick:function(){d(!0),j(!0)},onKeyDown:function(){d(!0),j(!0)}},"+")),c.a.createElement("li",{className:"settings__darkmode"},c.a.createElement("button",{"data-testid":"darkmode-action","aria-label":"DarkMode on/off",type:"button",onClick:function(){return a(!t)},onKeyDown:function(){return a(!t)}},c.a.createElement(O.c,null)))))),c.a.createElement(D,{showAddTaskMain:!1,shouldShowMain:s,setShowQuickAddTask:j,showQuickAddTask:m}))},I=function(e){var t=e.project,a=v().setProjects,r=N().setSelectProject,l=Object(n.useState)(!1),s=Object(o.a)(l,2),d=s[0],i=s[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:"sidebar__dot"}),c.a.createElement("span",{className:"sidebar__project-name"},t.name),c.a.createElement("span",{className:"sidebar__project-delete","data-testid":"project-delete",onClick:function(){return i(!d)}},c.a.createElement(O.j,null),d&&c.a.createElement("div",{className:"project-delete-modal"},c.a.createElement("div",{className:"project-delete-modal__inner"},c.a.createElement("p",null,"Are You Sure You Want To Delete This Project"),c.a.createElement("button",{onClick:function(){return e=t.docId,void m.firestore().collection("project").doc(e).delete().then((function(){a(""),r("Inbox")}));var e}},"Delete"),c.a.createElement("span",{onClick:function(){return i(!d)}},"Cancel")))))},S=function(e){var t=e.activeValue,a=void 0===t?null:t,r=Object(n.useState)(a),l=Object(o.a)(r,2),s=l[0],d=l[1],i=N().setSelectProject,u=v().projects;return u&&u.map((function(e){return c.a.createElement("li",{key:e.projectId,"data-doc-id":e.docId,"data-testid":"project",className:s===e.projectId?"active sidebar__project":"sidebar__project"},c.a.createElement("div",{"data-testid":"project-action",role:"button",tabIndex:0,onClick:function(){d(e.projectId),i(e.projectId)},onKeyDown:function(){d(e.projectId),i(e.projectId)}},c.a.createElement(I,{project:e})))}))},T=function(e){var t=e.shouldShow,a=void 0!==t&&t,r=Object(n.useState)(a),l=Object(o.a)(r,2),s=l[0],d=l[1],i=Object(n.useState)(""),u=Object(o.a)(i,2),j=u[0],p=u[1],b=v().setProjects,k=f();return c.a.createElement("div",{className:"add-project","data-testid":"add-project"},s&&c.a.createElement("div",{className:"add-project__input","data-testid":"add-project-inner"},c.a.createElement("input",{"data-testid":"project-name",type:"text",className:"add-project__name",value:j,onChange:function(e){return p(e.target.value)},placeholder:"Name your project"}),c.a.createElement("button",{className:"add-project__submit",type:"button",onClick:function(){return j&&m.firestore().collection("project").add({name:j,projectId:k,userId:"1"}).then((function(){b(""),p(""),d(!1)}))},"data-testid":"add-project-submit"},"Add"),c.a.createElement("span",{onClick:function(){return d(!1)},onKeyDown:function(){return d(!1)},"data-testid":"hide-project-overlay",className:"add-project__cancel",role:"button",tabIndex:0},"Cancel")),c.a.createElement("span",{className:"add-project__plus"},"+"),c.a.createElement("span",{"arial-label":"Add Project","data-testid":"add-project-action",className:"add-project__text",onClick:function(){return d(!s)},onKeyDown:function(){return d(!s)},role:"button",tabIndex:-1},"Add Project"))},Y=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)("inbox"),s=Object(o.a)(l,2),d=s[0],i=s[1],u=N().setSelectProject;return c.a.createElement("div",{className:"sidebar","data-testid":"sidebar"},c.a.createElement("div",{className:"sidebar__generic"},c.a.createElement("ul",null,c.a.createElement("li",{"data-testid":"inbox",className:"inbox"===d?"active":void 0},c.a.createElement("div",{"data-testid":"inbox-action",onClick:function(){i("inbox"),u("INBOX")},onKeyDown:function(){i("inbox"),u("INBOX")},role:"button",tabIndex:0,"aria-label":"Show Inbox Task"},c.a.createElement("span",null,c.a.createElement(O.b,null)),c.a.createElement("span",null,"Inbox"))),c.a.createElement("li",{"data-testid":"today",className:"today"===d?"active":void 0},c.a.createElement("div",{"data-testid":"today-action",onClick:function(){i("today"),u("TODAY")},onKeyDown:function(){i("today"),u("TODAY")},role:"button",tabIndex:0,"aria-label":"Show Today Task"},c.a.createElement("span",null,c.a.createElement(O.d,null)),c.a.createElement("span",null,"Today"))),c.a.createElement("li",{"data-testid":"next_7",className:"next_7"===d?"active":void 0},c.a.createElement("div",{"data-testid":"next-7-action",onClick:function(){i("next_7"),u("NEXT_7")},onKeyDown:function(){i("next_7"),u("NEXT_7")},role:"button",tabIndex:0,"aria-label":"Show Next 7 Task"},c.a.createElement("span",null,c.a.createElement(O.e,null)),c.a.createElement("span",null,"Next 7 days"))))),c.a.createElement("div",{className:"sidebar__middle",onClick:function(){return r(!a)},onKeyDown:function(){return r(!a)}},c.a.createElement("span",null,c.a.createElement(O.a,{className:a?void 0:"hidden-projects"})),c.a.createElement("h2",null,"Projects")),c.a.createElement("ul",{className:"sidebar__projects"},a&&c.a.createElement(S,null)),a&&c.a.createElement(T,null))},C=function(e){var t=e.id,a=e.taskDesc;return c.a.createElement("div",{"aria-label":"Mark ".concat(a," as done!"),className:"checkbox-holder","data-testid":"checkbox-action",onClick:function(){m.firestore().collection("tasks").doc(t).update({archived:!0})}},c.a.createElement("span",{className:"checkbox"}))},g=function(){var e,t,a=N().selectedProject,r=v().projects,l=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),c=a[0],r=a[1],l=Object(n.useState)([]),s=Object(o.a)(l,2),i=s[0],u=s[1];return Object(n.useEffect)((function(){var t=m.firestore().collection("tasks").where("userId","==","1");return e&&!b(e)?t=t.where("projectId","==",e):"TODAY"===e?t=t.where("date","==",d()().format("DD/MM/YYYY")):"INBOX"!==e&&0!==e||(t=t.where("date","==","")),t=t.onSnapshot((function(t){var a=t.docs.map((function(e){return Object(j.a)({id:e.id},e.data())}));r("NEXT_7"===e?a.filter((function(e){return d()(e.date,"DD/MM/YYYY").diff(d()(),"days")<=7&&!0!==e.archived})):a.filter((function(e){return!0!==e.archived}))),u(a.filter((function(e){return!1!==e.archived})))})),function(){return t()}}),[e]),{tasks:c,archivedTask:i}}(a).tasks,s="";return r.length>0&&a&&!b(a)&&(s=function(e,t){return e.find((function(e){return e.projectId===t}))}(r,a).name),r.length>0&&a&&b(a)&&(s=(e=p,t=a,e.find((function(e){return e.key===t}))).name),c.a.createElement("div",{className:"tasks","data-testid":"tasks"},c.a.createElement("h2",{"data-testid":"project-name"},s),c.a.createElement("ul",{className:"tasks__list"},l.map((function(e){return c.a.createElement("li",{key:"".concat(e.id)},c.a.createElement(C,{id:e.id}),c.a.createElement("span",null,e.task))}))),c.a.createElement(D,null))},A=function(){return c.a.createElement("section",{className:"content"},c.a.createElement(Y,null),c.a.createElement(g,null))},P=function(e){var t=e.darkmodeDefault,a=void 0!==t&&t,r=Object(n.useState)(a),l=Object(o.a)(r,2),s=l[0],d=l[1];return c.a.createElement(_,null,c.a.createElement(E,null,c.a.createElement("main",{"data-testid":"application",className:s?"darkmode":void 0},c.a.createElement(x,{darkmode:s,setDarkMode:d}),c.a.createElement(A,null))))};a(27);Object(r.render)(c.a.createElement(P,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.65c88598.chunk.js.map